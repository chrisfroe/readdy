# Find pthread library
FIND_PACKAGE(Threads REQUIRED)

LINK_DIRECTORIES(${GOOGLETEST_LIBRARY})
LINK_LIBRARIES(gtest gtest_main ${READDY_LIBRARY_NAME} ${CMAKE_THREAD_LIBS_INIT})

FILE(GLOB READDY_TEST_SOURCES *.cpp)
ADD_EXECUTABLE(runUnitTests ${READDY_TEST_SOURCES})
TARGET_LINK_LIBRARIES(runUnitTests ${gtest})

ADD_TEST(NAME readdy-tests COMMAND runUnitTests)