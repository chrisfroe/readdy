# Find pthread library
FIND_PACKAGE(Threads REQUIRED)

INCLUDE_DIRECTORIES(${ReaDDy2_INCLUDE_DIRS})
LINK_DIRECTORIES(${GOOGLETEST_LIBRARY})
LINK_LIBRARIES(gtest gtest_main ${CMAKE_THREAD_LIBS_INIT} ReaDDy2)

FILE(GLOB READDY_TEST_SOURCES *.cpp)
ADD_EXECUTABLE(runUnitTests ${READDY_TEST_SOURCES} ${GOOGLETEST_INCLUDE})
TARGET_LINK_LIBRARIES(runUnitTests ${gtest})

ADD_TEST(NAME readdy-tests COMMAND runUnitTests)